<center>

# 记录: 跨越365天——Tsugu机器人面对的


***  

</center>




> 以我所见，让我按照时间顺序，稍微记录一下这一年来，我与tsugu机器人这一路的故事。

## 六周年数据变更
事情要从一年前的今天开始讲…
3月15日，日服六周年更新，bestdori崩溃半天后，更新了数据，很多数据已不再适用于原本的tsugu。不过目前缝缝补补也不是不能跑。

## 祸因
大概在2月6日，山本在群里提到，可能要将tsugu作为koishi插件发布。
山本个人原因也在规划着一次回老家（存疑），最终在三月初坐上✈️回到北京，但是一路上却是坏运气与意外不断，各种事情把行程一延再延。

## tsugu服务器停电
tsugu又寄了（ 
所有的分布端后台都显示ws连接已关闭。而此时山本本人还在北京，完全没有办法解决这个问题，也无法及时在停电前后控制局面。

## 内部错误。
由于意外断电导致tsugu真的内部错误了，来电重启后，很多通过反向ws连接的分布端都难逃——循环发送“内部错误。”导致被tx踢下线甚至冻结。紧急关停服务器，也难以敢再开…
有一说一从这个时候开始，经历了漫长的一段无菇时期…（真的很长）
我都怀疑山本是不是跑路了（不是），确实也有一些其他bot尝试复刻tsugu功能，大家也都很爱着自己的邦邦（雾）。

## 计划
由于「游戏ui变化/数据更新」「早已萌生的koishi计划」「历史代码杂乱难维护」tsugu很难不迎来一次更新。
但是这些事情发生时，山本早已在国内耽误太多时间，回去后应该更是事务也是繁多。

## go-cqhttp：渐入黑暗
时间差不多是四月了，三月的时候，腾讯公司修复了一直以来民间BOT所依赖的扫码登录漏洞
至此，登陆越来越困难，方法越来越复杂…
即使社区努力的尝试解决，受限于不只是技术的方方面面…
诸如各种sign技术的放开，但不稳定性和被封与风控率还是太高了…

## 开源与重构
五月份，山本逐渐拾起了tsugu的计划，并且真的有在一点一点的努力的爬着开发，计划着将tsugu代码全部覆写一次，作为「koishi」插件，并且真的是以一个越来越快最后起飞的速度在写
（对于大鸽子真的很快了）
￼

## 为什么是koishi
这是js最知名的机器人框架。
本身koishi提供了无代码的机器人部署环境以及清晰美观的控制台界面，非常适合作为分布端操作，而且koishi支持很多很多平台 kook discord onebot…甚至米游社的大别野，都是没有问题，这也是机器人框架红利…
听起来确实是不错呢。koishi也是一个很有活力的社区。
但一些危险也暗藏其中…

## 一些琐事
我在tsugu开发的尾声被山本邀请加入tsugu的项目开发组，关于这点我确实挺抱歉，那个时候的我，只是一个编程新人，开发不了一点的，只是熟悉koishi的用户环境而已…
不过这也埋下了一颗种子…

## canvas
我和棱镜其实在测试中都尝试过部署开发中的dev状态的tsugu，真的，很难跑起来。当然后来找到的原因所在。大部分是canvas（画图库）的报错。但是这件事开发的时候并没有被重视。
后来才发现这个事情是多么的难办…

## 第一次npm发布
tsugu直接被插件市场判定为不安全插件。
而且即使经过了两三个版本的修复，依然是不能正常运行。
原因很复杂，又很简单，koishi开发群里因为这件事情从下午和 谐 交 流 到了晚上…
不推荐的canvas，本身不是开箱即用的依赖…

## koishi与分布式的阻碍
tsugu


## 弯路与束缚
这是2023年六月，很多QQ机器人维护者做梦都能梦到 code 45 code 237






## 现在与7月:不久的将来


## 夭折的7月与9月的7月




## 未来的规划


## 十月: 黑暗时代
十月的时候，我写过一篇文章，大意如下: 
事先声明，本人对此事件毫无参与，仅仅是带着历史人文关怀对过去的事件回收总结，期待着未来更光明的前景。请不要转发此说说。
事情都是真的，但不至于那么严重，某sign作者以及参与人员均被喝茶，手机确实是被监控了，不过原因具体点的不好说，并不是很单纯的原因促成的。
都是开源项目，几位请喝茶的基本上是写保证书，某sign被要求衫裤。各路人马也是仓皇而逃。tx动了大手笔了，所有今年新增项目全部消声灭迹，其中包含qqnt协议项目，sign项目，xposed项目，hook项目。
实际上触及tx底线要求下架的只有各种sign，所以请不要造成恐慌。即便是贴近底层的东西暂时也没有接触tx底线，各位开发者都不要太担心，各路人马躲入方舱只是人类本能，也是tx的期望与警告的反馈。
从今年五月开始就预测会发生的事情，果然还是发生了。这是黑暗时代v2.0，gocq曾经创下的一片繁荣生态如今已完全不符健在。onebot协议也好，cqcode也罢，cq几乎已经到尽头了。很喜欢一句话：
“想到一群很厉害的大佬聚在一起研究这个没出路的机器人，我就觉得可悲。”
飞蛾扑火，热烈的余光被黑暗笼罩，光明总是在燃尽的那一刻绽放。
一片夜空的云被暴雨墨卷沙尘的吹尽，至今的一切都没有改变，一如既往的纯粹。
致敬一路走来的每个社区贡献者。

## 十月的Tsugu
活的好好的！
虽然我上面写的和开了香槟一样（实际国内bot大环境也是开了香槟），但是好的事情有很多。
还记得我之前说过吗，我对koishi用户环境的熟悉为我埋下了一颗种子～
猫猫朋友总是帮了我很大的忙！
chronocat项目的猫猫朋友也是我的好朋友，跑个tsugu还是轻轻松松的！
这也体现了当年山本选择了 koishi 作为机器人框架的好处，完全无痛的迁移！
（不过山本这个笨蛋忘记自己把接入机器人的app名写死在代码里，导致大家重新绑定两次，这似乎也是无痛迁移比较痛的地方）

## 十一月: QQ 官方机器人上线！
我参加了QQ举办的比赛。
这个比赛真的很麻烦，但是我还是努力的去申请了，最后顺利拿到了账号。（但也付出了相应的代价.jpg）
我预感到了tsugu一定会很适合作为tsugu-qq官方机器人跑起，而不是我的私人小bot，我果断舍生取义（什么）拿我的个人号起了一个Tsugu！
（实际上只是我觉得山本这个大咕咕一定不会做，这种事只有我来做了😇）
实际上这样做比较方便，因为前面提到的koishi的舒适性和山本插件的跨平台性，很舒适的就可以接入QQ！
但这种舒服持续不了多久，而且也没想象的舒服…
但是确实很快上线了！

## QQ官方机器人的好处
众所周知QQ官方bot下的Tsugu难用的要死，不仅折磨用户还折磨开发者…
但并不是毫无用处。
不是每个群都有资源拿到一个tsugu实体bot的。像很多游戏边缘化的群聊 自然是需要tsugu 但并不需要一个实体bot，甚至tsugu-qq的提示更有助于新人使用。例如一些地区群 声优群 现地群 活动群…这些群基本长期聊天的话 都会配备一个tsugu-qq。这个就是tsugu-qq特性所决定的 唯一的 好处。
当然还有极端一点的例子 挽星社 的群2000人 话特别多 没有别的bot 只有tsugu-qq（我反正不敢给那种调用频率的群放我家tomori，发言太多会被QQ制裁的.png）

# 未完待续...

